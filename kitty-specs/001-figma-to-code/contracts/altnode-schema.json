{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AltNode Schema",
  "description": "Schema for normalized Figma node representation with CSS-familiar properties",
  "type": "object",
  "required": ["id", "name", "type", "styles"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Figma node ID (format: {fileId}:{nodeId})",
      "pattern": "^[a-zA-Z0-9]+:[0-9]+$"
    },
    "name": {
      "type": "string",
      "description": "Node name from Figma",
      "minLength": 1
    },
    "type": {
      "type": "string",
      "description": "Normalized node type",
      "enum": ["container", "text", "image", "group"]
    },
    "styles": {
      "$ref": "#/definitions/CSSProperties"
    },
    "children": {
      "type": "array",
      "description": "Child AltNodes (nested tree structure)",
      "items": {
        "$ref": "#"
      }
    },
    "figmaProperties": {
      "type": "object",
      "description": "Original Figma properties for reference (not used in rule matching)",
      "additionalProperties": true
    }
  },
  "additionalProperties": false,
  "definitions": {
    "CSSProperties": {
      "type": "object",
      "description": "CSS-like properties (camelCase keys, string values)",
      "properties": {
        "display": {
          "type": "string",
          "enum": ["flex", "block", "inline", "inline-block", "none"]
        },
        "flexDirection": {
          "type": "string",
          "enum": ["row", "column", "row-reverse", "column-reverse"]
        },
        "gap": {
          "type": "string",
          "description": "CSS gap property (e.g., '16px', '1rem')",
          "pattern": "^[0-9]+(px|rem|em|%)$"
        },
        "padding": {
          "type": "string",
          "description": "CSS padding shorthand (e.g., '12px 16px')"
        },
        "margin": {
          "type": "string",
          "description": "CSS margin shorthand"
        },
        "background": {
          "type": "string",
          "description": "Background color (hex, rgba, named color)"
        },
        "color": {
          "type": "string",
          "description": "Text color"
        },
        "border": {
          "type": "string",
          "description": "CSS border shorthand (e.g., '1px solid #000')"
        },
        "borderRadius": {
          "type": "string",
          "description": "Border radius (e.g., '8px')"
        },
        "boxShadow": {
          "type": "string",
          "description": "CSS box-shadow (e.g., '2px 2px 4px rgba(0,0,0,0.1)')"
        },
        "fontSize": {
          "type": "string",
          "description": "Font size (e.g., '16px')"
        },
        "fontFamily": {
          "type": "string",
          "description": "Font family (e.g., \"'Inter', sans-serif\")"
        },
        "fontWeight": {
          "oneOf": [
            { "type": "string" },
            { "type": "number", "minimum": 100, "maximum": 900 }
          ],
          "description": "Font weight (e.g., 'bold', 400)"
        },
        "lineHeight": {
          "oneOf": [
            { "type": "string" },
            { "type": "number" }
          ],
          "description": "Line height (e.g., '1.5', '24px')"
        },
        "position": {
          "type": "string",
          "enum": ["relative", "absolute", "fixed", "sticky"]
        },
        "top": {
          "type": "string",
          "description": "Top position (e.g., '10px')"
        },
        "left": {
          "type": "string",
          "description": "Left position (e.g., '20px')"
        },
        "width": {
          "type": "string",
          "description": "Width (e.g., '100px', '50%')"
        },
        "height": {
          "type": "string",
          "description": "Height (e.g., '40px', 'auto')"
        },
        "zIndex": {
          "type": "number",
          "description": "Stacking order"
        }
      },
      "additionalProperties": {
        "oneOf": [
          { "type": "string" },
          { "type": "number" }
        ]
      }
    }
  }
}
